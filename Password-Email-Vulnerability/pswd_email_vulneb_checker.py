from urllib.request import urlopen
import getpass
import pyhibp
from pyhibp import pwnedpasswords as pw
import webbrowser
import time, sys

pyhibp.set_user_agent(ua="None")
def pswd_email_pwned_check():

    print("You won't be able to see your password because of security reasons, but in background, it will be written.")
    user_pswd = getpass.getpass(stream = sys.stderr)
    resp = pw.is_password_breached(password=f"{user_pswd}")

    if resp:
        print(f"Password breached! \nThis password was used {resp} times before.")
    else:
        print("Your password is not breached yet!!! \nBut keep your password strong")

    print("Check if your email is pwned or not? \nIf you wanna check, say, 'Check it'...")

    x = input("Enter '1' to check your email to be pawned or not, else enter anything :) ")
    if x == '1':
        webbrowser.open('https://haveibeenpwned.com/')      # It will proceed you to the official website of email pawned checking
pswd_email_pwned_check()
time.sleep(5)

# This function will help you to recheck your password pawned status
y = input("If you wanna check more password breach data, enter '1', else anything to quit!!! ")

if y == '1':
    while True:
        pswd_email_pwned_check()
        z = input("Enter '1' if you want to continue, to exit, enter anything!!!")
        if  '1' not in z:
            break

else:
    print("Thanks for checking your privacy :) \nAfter 3 seconds, you'll be quit")
    time.sleep(3)
    exit(0)